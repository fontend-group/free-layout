# 网页埋点节点

网页埋点节点是一个自定义的工作流节点，基于 `@xwfe/web-track-browser` SDK 实现，支持通用埋点、自定义埋点和批量埋点上传。

## 功能特性

- 🎯 **通用埋点**: 支持页面浏览、事件追踪等通用埋点场景
- 🎨 **自定义埋点**: 支持业务相关的点击埋点和行为埋点
- 📦 **批量埋点**: 支持一次性发送多个埋点数据
- 🔧 **灵活配置**: 支持动态配置应用 ID、用户 ID、调试模式等
- 🛡️ **错误处理**: 完善的错误处理和状态反馈

## 配置说明

### 埋点配置

- **应用 ID**: 必填，埋点上报的应用标识
- **用户 ID**: 可选，当前用户的唯一标识
- **上报地址**: 可选，自定义的埋点上报服务器地址
- **调试模式**: 可选，开启后会在控制台输出详细的埋点信息

### 埋点类型

#### 1. 通用埋点

适用于页面浏览、模块展示等通用场景：

```json
{
  "eventName": "page_view",
  "params": {
    "page_name": "首页",
    "module": "导航栏"
  }
}
```

#### 2. 自定义埋点

适用于按钮点击、业务操作等自定义场景：

```json
{
  "clickId": "home_banner_click",
  "params": {
    "banner_id": "123",
    "position": "top"
  }
}
```

#### 3. 批量埋点

一次性发送多个埋点数据（暂时简化实现）

## 使用方式

1. **添加节点**: 在节点面板中选择"埋点节点"
2. **配置基本信息**: 填写应用 ID 等必要配置
3. **选择埋点类型**: 根据业务需求选择对应的埋点类型
4. **配置埋点数据**: 填写事件名称或点击 ID，以及相关参数
5. **连接工作流**: 将节点连接到工作流中的适当位置

## 输出数据

节点执行后会输出以下数据：

```json
{
  "success": true,
  "message": "埋点发送成功",
  "data": {
    "timestamp": 1704038400000,
    "logData": {
      // 实际发送的埋点数据
    }
  }
}
```

## 技术实现

- 基于 `@xwfe/web-track-browser` SDK
- 自动获取页面 URL、标题、用户代理等通用信息
- 支持从 URL 参数获取 AB 测试分组信息
- 自动注入用户 ID（从 Cookie 中获取`stu_id`）

## 注意事项

1. 确保已正确安装 `@xwfe/web-track-browser` 依赖
2. 应用 ID 为必填项，请确保配置正确
3. 参数配置需要使用有效的 JSON 格式
4. 建议在开发环境下开启调试模式以便查看埋点信息
